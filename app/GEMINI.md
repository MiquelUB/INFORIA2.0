GU√çA PARA AGENTE GEMINI EN VS CODE: MIGRACI√ìN INFORIA 2.0Este documento proporciona el contexto cr√≠tico y las acciones inmediatas necesarias para estabilizar el proyecto INFORIA 2.0. La tarea principal es resolver los errores de compilaci√≥n (npm run build) derivados de una migraci√≥n arquitect√≥nica incompleta.1. üåê Contexto del Proyecto y Stack Tecnol√≥gicoEl proyecto es una aplicaci√≥n SaaS (Software as a Service) para psic√≥logos y emprendedores.Framework Principal: Next.js 14+ (utilizando el App Router).Estilos: Tailwind CSS.Backend/BaaS: Supabase (PostgreSQL, Auth, Edge Functions, Almacenamiento).Estado Anterior: El proyecto intent√≥ migrar del antiguo Pages Router o React Router DOM al App Router, resultando en conflictos de compilaci√≥n cr√≠ticos.2. üö® Problema Cr√≠tico Actual (Causa Ra√≠z)Tras resolver los problemas iniciales de cach√© y nombres de archivo, el error persistente es el conflicto entre los Server Components (SC) y los Client Components (CC) de Next.js.El compilador asume que todas las p√°ginas son Server Components y lanza errores cuando detecta hooks de React que solo pueden ejecutarse en el cliente.2.1. Detalle del Error Reportado por npm run buildEl error es consistente y se centra en el uso de hooks de estado y navegaci√≥n en archivos de p√°gina que no est√°n marcados con 'use client'; y un problema de rutas de importaci√≥n:Tipo de ErrorArchivo(s) Afectado(s)Hooks de Cliente IdentificadosConflicto Server/Clientapp/(app)/account/page.tsxuseState, useEffectConflicto Server/Clientapp/(app)/onboarding/page.tsxuseState, useRouterConflicto Server/Clientapp/(app)/patients/[id]/page.tsxuseState, useEffect, useRouter, useSearchParamsConflicto Server/Clientapp/(app)/patients/page.tsxuseStateModule Not Foundapp/(app)/dashboard/page.tsx, app/(app)/patients/page.tsx, app/(app)/patients/[id]/page.tsx@/hooks/usePatientsInestabilidad CSSapp/globals.cssSelector * global dentro de @layer base3. ‚úÖ Soluci√≥n Inmediata (Estrategia de Estabilizaci√≥n)La soluci√≥n consiste en tres pasos de refactorizaci√≥n de c√≥digo obligatorios para que el build de producci√≥n sea exitoso y estable.3.1. Correcci√≥n Masiva: Declarar Componentes de ClienteAcci√≥n: Abrir cada archivo de p√°gina afectado y a√±adir la directiva 'use client'; en la primera l√≠nea de c√≥digo.Archivos a corregir:app/(app)/account/page.tsxapp/(app)/onboarding/page.tsxapp/(app)/patients/[id]/page.tsxapp/(app)/patients/page.tsx3.2. Correcci√≥n de Rutas de Importaci√≥nEl alias @/hooks/usePatients no est√° resolviendo correctamente y debe apuntar a la ubicaci√≥n real del hook dentro de la estructura de la librer√≠a (lib).Acci√≥n: Modificar las rutas de importaci√≥n en los archivos donde falla:Archivo 1: app/(app)/dashboard/page.tsxArchivo 2: app/(app)/patients/page.tsxArchivo 3: app/(app)/patients/[id]/page.tsx‚ùå Importaci√≥n a buscar‚úÖ Reemplazar porimport { usePatients } from '@/hooks/usePatients';import { usePatients } from '@/lib/hooks/usePatients';3.3. Correcci√≥n del CSS GlobalEl selector universal (*) dentro de la capa base de Tailwind es una fuente de inestabilidad de compilaci√≥n en Next.js.Acci√≥n: Abrir app/globals.css y eliminar completamente el siguiente bloque dentro del segundo @layer base:CSS/* ‚ùå ELIMINAR ESTO EN app/globals.css */
* {
¬† ¬† @apply border-border;
}
4. üöÄ Pasos de Verificaci√≥nUna vez que el c√≥digo est√© corregido, el proceso de validaci√≥n en la terminal debe ser:Limpieza de Cach√©: Remove-Item -Path .next -Recurse -ForcePrueba Final: npm run buildResultado Esperado: ‚úì Compiled successfully.