(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[383],{9339:function(e,s,a){Promise.resolve().then(a.bind(a,2275))},2275:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return et}});var t=a(7437),r=a(2265),i=a(2869),l=a(6070),n=a(5186),d=a(6818),c=a(5974),o=a(394),m=a(4508);let x=o.fC,u=o.xz,p=o.h_,h=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(o.aV,{className:(0,m.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:s})});h.displayName=o.aV.displayName;let f=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsxs)(p,{children:[(0,t.jsx)(h,{}),(0,t.jsx)(o.VY,{ref:s,className:(0,m.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});f.displayName=o.VY.displayName;let j=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,m.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...a})};j.displayName="AlertDialogHeader";let g=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,m.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};g.displayName="AlertDialogFooter";let N=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(o.Dx,{ref:s,className:(0,m.cn)("text-lg font-semibold",a),...r})});N.displayName=o.Dx.displayName;let v=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(o.dk,{ref:s,className:(0,m.cn)("text-sm text-muted-foreground",a),...r})});v.displayName=o.dk.displayName;let b=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(o.aU,{ref:s,className:(0,m.cn)((0,i.d)(),a),...r})});b.displayName=o.aU.displayName;let y=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(o.$j,{ref:s,className:(0,m.cn)((0,i.d)({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});y.displayName=o.$j.displayName;var _=a(1264),w=a(875),C=a(2135),Z=a(401);let E=_.fC;_.ZA;let k=_.B4,z=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsxs)(_.xz,{ref:s,className:(0,m.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[r,(0,t.jsx)(_.JO,{asChild:!0,children:(0,t.jsx)(w.Z,{className:"h-4 w-4 opacity-50"})})]})});z.displayName=_.xz.displayName;let S=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(_.u_,{ref:s,className:(0,m.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(C.Z,{className:"h-4 w-4"})})});S.displayName=_.u_.displayName;let P=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(_.$G,{ref:s,className:(0,m.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(w.Z,{className:"h-4 w-4"})})});P.displayName=_.$G.displayName;let D=r.forwardRef((e,s)=>{let{className:a,children:r,position:i="popper",...l}=e;return(0,t.jsx)(_.h_,{children:(0,t.jsxs)(_.VY,{ref:s,className:(0,m.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...l,children:[(0,t.jsx)(S,{}),(0,t.jsx)(_.l_,{className:(0,m.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(P,{})]})})});D.displayName=_.VY.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(_.__,{ref:s,className:(0,m.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=_.__.displayName;let I=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsxs)(_.ck,{ref:s,className:(0,m.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(_.wU,{children:(0,t.jsx)(Z.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(_.eT,{children:r})]})});I.displayName=_.ck.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(_.Z0,{ref:s,className:(0,m.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=_.Z0.displayName;var R=a(4498),q=a(1817),A=a(2369),U=a(2660),F=a(1047),T=a(8736),V=a(3121),Y=a(5868),O=a(7117),L=a(2489),B=a(9663),M=a(3041),K=a(9345),W=a(3774),$=a(2720),G=a(9397),H=a(6865),Q=a(8930),J=a(6362),X=a(8226),ee=a(9376),es=a(3049),ea=a(212);function et(e){let{params:s,searchParams:a}=e,o=(0,ee.useRouter)(),{toast:m}=(0,ea.pm)(),p=s.id,{data:h,isLoading:_}=(0,es.lm)(p||""),w=(0,es.aq)(),C=(0,es.Sl)(),[Z,S]=(0,r.useState)(!1),[P,et]=(0,r.useState)(!1),[er,ei]=(0,r.useState)({name:"",phone:"",email:"",birth_date:"",sexo:"",direccion_fisica:"",persona_rescate_nombre:"",persona_rescate_telefono:"",persona_rescate_email:"",notes:"",tags:[]}),[el,en]=(0,r.useState)([{id:1,date:"2025-01-15",amount:"85.00",status:"Pagado",method:"Tarjeta",concept:"Sesi\xf3n individual"},{id:2,date:"2025-02-15",amount:"85.00",status:"Pendiente",method:"Transferencia",concept:"Sesi\xf3n individual"}]),ed=[{id:1,title:"Informe Inicial - Evaluaci\xf3n Psicol\xf3gica",date:"2025-01-10",type:"Evaluaci\xf3n",status:"Completado",driveUrl:"https://docs.google.com/document/d/1abc123/edit"},{id:2,title:"Seguimiento Sesi\xf3n 5",date:"2025-02-05",type:"Seguimiento",status:"Completado",driveUrl:"https://docs.google.com/document/d/1def456/edit"},{id:3,title:"Informe de Progreso Mensual",date:"2025-02-28",type:"Progreso",status:"Borrador",driveUrl:"https://docs.google.com/document/d/1ghi789/edit"},{id:4,title:"Evaluaci\xf3n Neuropsicol\xf3gica Completa",date:"2025-01-20",type:"Evaluaci\xf3n",status:"Completado",driveUrl:"https://docs.google.com/document/d/1jkl012/edit"},{id:5,title:"Seguimiento Sesi\xf3n 10",date:"2025-02-10",type:"Seguimiento",status:"Completado",driveUrl:"https://docs.google.com/document/d/1mno345/edit"},{id:6,title:"Informe Familiar - Entorno de Apoyo",date:"2025-02-15",type:"Familiar",status:"Completado",driveUrl:"https://docs.google.com/document/d/1pqr678/edit"},{id:7,title:"Seguimiento Sesi\xf3n 15",date:"2025-02-20",type:"Seguimiento",status:"Completado",driveUrl:"https://docs.google.com/document/d/1stu901/edit"},{id:8,title:"Evaluaci\xf3n de Riesgo",date:"2025-02-25",type:"Evaluaci\xf3n",status:"Borrador",driveUrl:"https://docs.google.com/document/d/1vwx234/edit"},{id:9,title:"Plan de Tratamiento Trimestral",date:"2025-03-01",type:"Plan",status:"Borrador",driveUrl:"https://docs.google.com/document/d/1yz567/edit"},{id:10,title:"Seguimiento Sesi\xf3n 20",date:"2025-03-05",type:"Seguimiento",status:"Completado",driveUrl:"https://docs.google.com/document/d/1abc890/edit"}];(0,r.useEffect)(()=>{h&&ei({name:h.name||"",phone:h.phone||"",email:h.email||"",birth_date:h.birth_date||"",sexo:h.sexo||"",direccion_fisica:h.direccion_fisica||"",persona_rescate_nombre:h.persona_rescate_nombre||"",persona_rescate_telefono:h.persona_rescate_telefono||"",persona_rescate_email:h.persona_rescate_email||"",notes:h.notes||"",tags:h.tags||[]})},[h]);let ec=async()=>{try{let e={name:er.name,phone:er.phone,email:er.email,birth_date:er.birth_date,notes:er.notes,sexo:er.sexo,direccion_fisica:er.direccion_fisica,persona_rescate_nombre:er.persona_rescate_nombre,persona_rescate_telefono:er.persona_rescate_telefono,persona_rescate_email:er.persona_rescate_email,tags:er.tags};await w.mutateAsync({id:p,updates:e}),S(!1),m({title:"Datos actualizados",description:"Los datos del paciente se han guardado correctamente."})}catch(e){m({title:"Error",description:"No se pudieron guardar los cambios.",variant:"destructive"})}},eo=async()=>{try{await C.mutateAsync(p),o.push("/patients"),m({title:"Paciente eliminado",description:"El paciente ha sido eliminado correctamente."})}catch(e){m({title:"Error",description:"No se pudo eliminar el paciente.",variant:"destructive"})}},em=e=>{ei({...er,tags:er.tags.filter((s,a)=>a!==e)})},ex=(e,s,a)=>{en(el.map((t,r)=>r===e?{...t,[s]:a}:t))},eu=e=>{en(el.filter((s,a)=>a!==e))},ep=e=>e?new Date(e).toLocaleDateString("es-ES"):"No especificada";return _?(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(R.Z,{}),(0,t.jsx)("main",{className:"container mx-auto px-6 py-8",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(q.Z,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Cargando perfil del paciente..."})]})})})]}):!h&&p?(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(R.Z,{}),(0,t.jsx)("main",{className:"container mx-auto px-6 py-8",children:(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"mx-auto w-24 h-24 bg-muted rounded-full flex items-center justify-center mb-4",children:(0,t.jsx)(A.Z,{className:"h-12 w-12 text-muted-foreground"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Paciente no encontrado"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-6",children:"El paciente solicitado no existe o ha sido eliminado."}),(0,t.jsxs)(i.z,{onClick:()=>o.push("/patients"),className:"mt-4",children:[(0,t.jsx)(U.Z,{className:"mr-2 h-4 w-4"}),"Volver a la lista de pacientes"]})]})})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)(R.Z,{}),(0,t.jsx)("div",{className:"border-b border-border bg-background",children:(0,t.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("h1",{className:"font-serif text-2xl font-medium text-foreground",children:(null==h?void 0:h.name)||"Paciente"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"|"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-muted-foreground text-sm",children:[(0,t.jsx)(F.Z,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:["Alta: ",(null==h?void 0:h.created_at)?ep(h.created_at):"No disponible"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)(i.z,{variant:"outline",onClick:()=>o.push("/session-workspace/".concat(p)),children:[(0,t.jsx)(T.Z,{className:"mr-2 h-4 w-4"}),"Iniciar Sesi\xf3n"]}),(0,t.jsxs)(i.z,{children:[(0,t.jsx)(V.Z,{className:"mr-2 h-4 w-4"}),"Alta Dossier"]})]})]})})}),(0,t.jsx)("main",{className:"container mx-auto px-6 py-8 max-w-7xl",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsx)("div",{className:"lg:col-span-2 space-y-8",children:(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(l.ll,{className:"font-serif text-xl flex items-center",children:[(0,t.jsx)(A.Z,{className:"mr-2 h-5 w-5"}),"Datos del Paciente"]}),Z?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(i.z,{size:"sm",onClick:ec,children:[(0,t.jsx)(O.Z,{className:"mr-2 h-4 w-4"}),"Guardar"]}),(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>{h&&ei({name:h.name||"",phone:h.phone||"",email:h.email||"",birth_date:h.birth_date||"",sexo:h.sexo||"",direccion_fisica:h.direccion_fisica||"",persona_rescate_nombre:h.persona_rescate_nombre||"",persona_rescate_telefono:h.persona_rescate_telefono||"",persona_rescate_email:h.persona_rescate_email||"",notes:h.notes||"",tags:h.tags||[]}),S(!1)},children:[(0,t.jsx)(L.Z,{className:"mr-2 h-4 w-4"}),"Cancelar"]})]}):(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>S(!0),children:[(0,t.jsx)(Y.Z,{className:"mr-2 h-4 w-4"}),"Editar Datos"]})]})}),(0,t.jsxs)(l.aY,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"font-medium text-foreground flex items-center",children:[(0,t.jsx)(B.Z,{className:"mr-2 h-4 w-4"}),"Informaci\xf3n Personal"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground block mb-2",children:"Nombre Completo"}),Z?(0,t.jsx)(n.I,{value:er.name,onChange:e=>ei({...er,name:e.target.value}),placeholder:"Nombre completo del paciente"}):(0,t.jsx)("p",{className:"text-foreground",children:er.name||"No especificado"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground block mb-2",children:"Sexo"}),Z?(0,t.jsxs)(E,{value:er.sexo,onValueChange:e=>ei({...er,sexo:e}),children:[(0,t.jsx)(z,{children:(0,t.jsx)(k,{placeholder:"Seleccionar sexo"})}),(0,t.jsxs)(D,{children:[(0,t.jsx)(I,{value:"Masculino",children:"Masculino"}),(0,t.jsx)(I,{value:"Femenino",children:"Femenino"}),(0,t.jsx)(I,{value:"No binario",children:"No binario"}),(0,t.jsx)(I,{value:"Prefiero no decir",children:"Prefiero no decir"})]})]}):(0,t.jsx)("p",{className:"text-foreground",children:er.sexo||"No especificado"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground block mb-2",children:"Fecha de Nacimiento"}),Z?(0,t.jsx)(n.I,{type:"date",value:er.birth_date,onChange:e=>ei({...er,birth_date:e.target.value})}):(0,t.jsx)("p",{className:"text-foreground",children:er.birth_date?"".concat(ep(er.birth_date)," (").concat((e=>{if(!e)return"No especificada";let s=new Date,a=new Date(e),t=s.getFullYear()-a.getFullYear(),r=s.getMonth()-a.getMonth();return(r<0||0===r&&s.getDate()<a.getDate())&&t--,"".concat(t," a\xf1os")})(er.birth_date),")"):"No especificada"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-sm font-medium text-muted-foreground block mb-2",children:[(0,t.jsx)(M.Z,{className:"inline mr-1 h-3 w-3"}),"Tel\xe9fono"]}),Z?(0,t.jsx)(n.I,{value:er.phone,onChange:e=>ei({...er,phone:e.target.value}),placeholder:"+34 000 000 000"}):(0,t.jsx)("p",{className:"text-foreground",children:er.phone||"No especificado"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsxs)("label",{className:"text-sm font-medium text-muted-foreground block mb-2",children:[(0,t.jsx)(K.Z,{className:"inline mr-1 h-3 w-3"}),"Email"]}),Z?(0,t.jsx)(n.I,{type:"email",value:er.email,onChange:e=>ei({...er,email:e.target.value}),placeholder:"email@ejemplo.com"}):(0,t.jsx)("p",{className:"text-foreground",children:er.email||"No especificado"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsxs)("label",{className:"text-sm font-medium text-muted-foreground block mb-2",children:[(0,t.jsx)(W.Z,{className:"inline mr-1 h-3 w-3"}),"Direcci\xf3n F\xedsica"]}),Z?(0,t.jsx)(d.g,{value:er.direccion_fisica,onChange:e=>ei({...er,direccion_fisica:e.target.value}),placeholder:"Direcci\xf3n completa del paciente",rows:2}):(0,t.jsx)("p",{className:"text-foreground",children:er.direccion_fisica||"No especificada"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4 border-t pt-6",children:[(0,t.jsxs)("h3",{className:"font-medium text-foreground flex items-center",children:[(0,t.jsx)(B.Z,{className:"mr-2 h-4 w-4"}),"Persona Responsable / Emergencia"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground block mb-2",children:"Nombre Completo"}),Z?(0,t.jsx)(n.I,{value:er.persona_rescate_nombre,onChange:e=>ei({...er,persona_rescate_nombre:e.target.value}),placeholder:"Nombre de la persona responsable"}):(0,t.jsx)("p",{className:"text-foreground",children:er.persona_rescate_nombre||"No especificado"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-sm font-medium text-muted-foreground block mb-2",children:[(0,t.jsx)(M.Z,{className:"inline mr-1 h-3 w-3"}),"Tel\xe9fono"]}),Z?(0,t.jsx)(n.I,{value:er.persona_rescate_telefono,onChange:e=>ei({...er,persona_rescate_telefono:e.target.value}),placeholder:"+34 000 000 000"}):(0,t.jsx)("p",{className:"text-foreground",children:er.persona_rescate_telefono||"No especificado"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-sm font-medium text-muted-foreground block mb-2",children:[(0,t.jsx)(K.Z,{className:"inline mr-1 h-3 w-3"}),"Email"]}),Z?(0,t.jsx)(n.I,{type:"email",value:er.persona_rescate_email,onChange:e=>ei({...er,persona_rescate_email:e.target.value}),placeholder:"email@ejemplo.com"}):(0,t.jsx)("p",{className:"text-foreground",children:er.persona_rescate_email||"No especificado"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4 border-t pt-6",children:[(0,t.jsx)("h3",{className:"font-medium text-foreground",children:"Notas Cl\xednicas"}),Z?(0,t.jsx)(d.g,{value:er.notes,onChange:e=>ei({...er,notes:e.target.value}),placeholder:"Notas importantes sobre el paciente...",rows:4}):(0,t.jsx)("p",{className:"text-foreground text-sm leading-relaxed bg-muted/30 p-4 rounded-lg",children:er.notes||"Sin notas registradas"})]}),(0,t.jsxs)("div",{className:"space-y-4 border-t pt-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h3",{className:"font-medium text-foreground flex items-center",children:[(0,t.jsx)($.Z,{className:"mr-2 h-4 w-4"}),"Etiquetas"]}),Z&&(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>{let e=prompt("Escribe la nueva etiqueta:");e&&e.trim()&&!er.tags.includes(e.trim())&&ei({...er,tags:[...er.tags,e.trim()]})},children:[(0,t.jsx)(G.Z,{className:"mr-2 h-4 w-4"}),"A\xf1adir Etiqueta"]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:er.tags.length>0?er.tags.map((e,s)=>(0,t.jsxs)(c.C,{variant:"secondary",className:"flex items-center gap-1",children:[e,Z&&(0,t.jsx)("button",{onClick:()=>em(s),className:"ml-1 hover:text-destructive",children:(0,t.jsx)(L.Z,{className:"h-3 w-3"})})]},s)):(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"Sin etiquetas"})})]}),Z&&(0,t.jsxs)("div",{className:"space-y-4 border-t border-destructive/20 pt-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-destructive",children:[(0,t.jsx)(H.Z,{className:"h-5 w-5"}),(0,t.jsx)("h3",{className:"font-medium",children:"Zona de Peligro"})]}),(0,t.jsxs)("div",{className:"bg-destructive/5 border border-destructive/20 rounded-lg p-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Esta acci\xf3n eliminar\xe1 permanentemente todos los datos del paciente, incluyendo informes y historial. Esta acci\xf3n no se puede deshacer."}),(0,t.jsxs)(x,{children:[(0,t.jsx)(u,{asChild:!0,children:(0,t.jsxs)(i.z,{variant:"destructive",size:"sm",children:[(0,t.jsx)(Q.Z,{className:"mr-2 h-4 w-4"}),"Eliminar Paciente"]})}),(0,t.jsxs)(f,{children:[(0,t.jsxs)(j,{children:[(0,t.jsxs)(N,{className:"flex items-center",children:[(0,t.jsx)(H.Z,{className:"mr-2 h-5 w-5 text-destructive"}),"\xbfEliminar paciente permanentemente?"]}),(0,t.jsxs)(v,{children:["Esta acci\xf3n eliminar\xe1 permanentemente a ",(0,t.jsx)("strong",{children:null==h?void 0:h.name})," y todos sus datos asociados, incluyendo:",(0,t.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[(0,t.jsx)("li",{children:"Informes cl\xednicos"}),(0,t.jsx)("li",{children:"Historial de pagos"}),(0,t.jsx)("li",{children:"Notas y etiquetas"}),(0,t.jsx)("li",{children:"Archivos adjuntos"})]}),(0,t.jsx)("p",{className:"mt-4 font-medium text-destructive",children:"Esta acci\xf3n no se puede deshacer."})]})]}),(0,t.jsxs)(g,{children:[(0,t.jsx)(y,{children:"Cancelar"}),(0,t.jsx)(b,{onClick:eo,className:"bg-destructive hover:bg-destructive/90",children:"Eliminar Definitivamente"})]})]})]})]})]})]})]})}),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)(l.ll,{className:"font-serif text-lg flex items-center",children:[(0,t.jsx)(T.Z,{className:"mr-2 h-5 w-5"}),"Actividad - Informes"]})}),(0,t.jsx)(l.aY,{className:"space-y-4",children:(0,t.jsx)("div",{className:"h-60 overflow-y-auto custom-scrollbar space-y-4 pr-2",children:ed.length>0?ed.map(e=>(0,t.jsx)("div",{className:"border rounded-lg p-4 hover:bg-muted/30 transition-colors",children:(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-medium text-foreground text-sm leading-tight",children:e.title}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 mt-2 text-xs text-muted-foreground",children:[(0,t.jsx)(F.Z,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:ep(e.date)}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)(c.C,{variant:"outline",className:"text-xs",children:e.type})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.C,{variant:"Completado"===e.status?"default":"secondary",className:"text-xs",children:e.status}),(0,t.jsx)("a",{href:e.driveUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:(0,t.jsx)(J.Z,{className:"h-4 w-4"})})]})]})},e.id)):(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsx)(T.Z,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"A\xfan no hay informes registrados."})]})})})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsx)(l.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(l.ll,{className:"font-serif text-lg flex items-center",children:[(0,t.jsx)(X.Z,{className:"mr-2 h-5 w-5"}),"Historial de Pagos"]}),(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>et(!P),children:[P?"Terminar Edici\xf3n":"Editar Pagos",P?(0,t.jsx)(L.Z,{className:"ml-2 h-4 w-4"}):(0,t.jsx)(Y.Z,{className:"ml-2 h-4 w-4"})]})]})}),(0,t.jsx)(l.aY,{className:"space-y-4",children:0!==el.length||P?(0,t.jsxs)("div",{className:"space-y-3",children:[el.map((e,s)=>(0,t.jsx)("div",{className:"border p-3 rounded-lg flex items-center justify-between",children:P?(0,t.jsxs)("div",{className:"grid grid-cols-5 gap-2 w-full items-center",children:[(0,t.jsx)(n.I,{type:"date",value:e.date,onChange:e=>ex(s,"date",e.target.value),className:"col-span-1"}),(0,t.jsx)(n.I,{type:"number",value:e.amount,onChange:e=>ex(s,"amount",e.target.value),className:"col-span-1"}),(0,t.jsxs)(E,{value:e.status,onValueChange:e=>ex(s,"status",e),children:[(0,t.jsx)(z,{className:"col-span-1",children:(0,t.jsx)(k,{})}),(0,t.jsxs)(D,{children:[(0,t.jsx)(I,{value:"Pagado",children:"Pagado"}),(0,t.jsx)(I,{value:"Pendiente",children:"Pendiente"}),(0,t.jsx)(I,{value:"Cancelado",children:"Cancelado"})]})]}),(0,t.jsx)(n.I,{value:e.concept,onChange:e=>ex(s,"concept",e.target.value),className:"col-span-2"}),(0,t.jsx)(i.z,{variant:"destructive",size:"icon",onClick:()=>eu(s),children:(0,t.jsx)(Q.Z,{className:"h-4 w-4"})})]}):(0,t.jsxs)("div",{className:"flex justify-between w-full items-center",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"font-semibold text-sm",children:e.concept}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[ep(e.date)," • ",e.method]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(c.C,{variant:"Pagado"===e.status?"default":"secondary",className:"font-semibold",children:[e.amount," €"]}),(0,t.jsx)(c.C,{variant:"Pagado"===e.status?"default":"Pendiente"===e.status?"secondary":"destructive",children:e.status})]})]})},e.id)),P&&(0,t.jsxs)(i.z,{variant:"outline",className:"w-full border-dashed mt-4",onClick:()=>{let e={id:el.length+1,date:new Date().toISOString().split("T")[0],amount:"0.00",status:"Pendiente",method:"Transferencia",concept:"Sesi\xf3n individual"};en([...el,e])},children:[(0,t.jsx)(G.Z,{className:"mr-2 h-4 w-4"}),"A\xf1adir Nuevo Pago"]})]}):(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"No hay pagos registrados."})})]})]})]})})]})}},3049:function(e,s,a){"use strict";a.d(s,{Sl:function(){return m},aq:function(){return o},lm:function(){return c},w5:function(){return d}});var t=a(1713),r=a(9827),i=a(1770),l=a(6467),n=a(212);let d=()=>(0,t.a)({queryKey:["patients"],queryFn:l.Wd.getAll}),c=e=>(0,t.a)({queryKey:["patient",e],queryFn:()=>l.Wd.getById(e),enabled:!!e}),o=()=>{let e=(0,r.NL)(),{toast:s}=(0,n.pm)();return(0,i.D)({mutationFn:e=>{let{id:s,updates:a}=e;return l.Wd.update(s,a)},onSuccess:()=>{e.invalidateQueries({queryKey:["patients"]}),s({title:"Paciente actualizado",description:"Los datos del paciente se han actualizado correctamente"})},onError:e=>{console.error("Error updating patient:",e),s({title:"Error",description:"Error al actualizar el paciente",variant:"destructive"})}})},m=()=>{let e=(0,r.NL)(),{toast:s}=(0,n.pm)();return(0,i.D)({mutationFn:e=>l.Wd.delete(e),onSuccess:()=>{e.invalidateQueries({queryKey:["patients"]}),s({title:"Paciente eliminado",description:"El paciente se ha eliminado correctamente"})},onError:e=>{console.error("Error deleting patient:",e),s({title:"Error",description:"Error al eliminar el paciente",variant:"destructive"})}})}}},function(e){e.O(0,[545,582,990,630,763,849,713,108,826,971,117,744],function(){return e(e.s=9339)}),_N_E=e.O()}]);