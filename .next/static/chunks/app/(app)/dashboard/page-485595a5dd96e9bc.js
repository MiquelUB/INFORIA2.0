(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{4675:function(t,e,s){Promise.resolve().then(s.bind(s,1819))},1819:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return b}});var r=s(7437),i=s(7648),n=s(9376),a=s(2369),o=s(7692),c=s(2869),u=s(6281),l=s(4438);let d=()=>{let t=(0,n.useRouter)(),{signOut:e}=(0,u.a)(),s=async()=>{try{await e(),l.Am.info("Sesi\xf3n cerrada correctamente."),t.push("/login")}catch(t){console.error("Error al cerrar sesi\xf3n:",t),l.Am.error("Fallo al cerrar sesi\xf3n.")}};return(0,r.jsxs)("header",{className:"flex items-center justify-between p-4 border-b",children:[(0,r.jsx)(i.default,{href:"/dashboard",className:"text-xl font-bold text-primary",children:"INFORIA2.0"}),(0,r.jsxs)("nav",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(i.default,{href:"/account",className:"text-sm font-medium hover:text-primary flex items-center",children:[(0,r.jsx)(a.Z,{className:"w-4 h-4 mr-1"}),"Cuenta"]}),(0,r.jsxs)(c.z,{variant:"destructive",size:"sm",onClick:s,children:[(0,r.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Cerrar Sesi\xf3n"]})]})]})};var h=s(6070),m=s(9205);let p=(0,m.Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var f=s(407),y=s(1047);let x=(0,m.Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var g=s(2265),v=s(3049);function b(){var t;let e=(0,n.useRouter)(),{data:s=[],isLoading:i}=(0,v.w5)(),[a,o]=(0,g.useState)(new Date().getDate()),[u,l]=(0,g.useState)(new Date().getMonth()),[m,b]=(0,g.useState)(new Date().getFullYear()),[w,N]=(0,g.useState)({}),j=s.length>0?s:[],C=async(t,e)=>{try{let s=await fetch("/api/get-patient-appointments?month=".concat(t+1,"&year=").concat(e));if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));let r=s.headers.get("content-type");if(!r||!r.includes("application/json"))throw TypeError("Oops, we haven't got JSON!");let i=await s.json(),n={};i.forEach(s=>{let r=s.ID;Object.keys(s).filter(t=>t.startsWith("Cita")).forEach(i=>{let a=s[i];if(a)try{let o=new Date(a);if(isNaN(o.getTime())){console.warn("Fecha inv\xe1lida encontrada para paciente ".concat(r,", cita ").concat(i,": ").concat(a));return}if(o.getMonth()===t&&o.getFullYear()===e){let t=o.getDate();n[t]||(n[t]=[]),n[t].push({patientUuid:r,patient:s["Nombre Completo"],time:o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"Consulta",status:"confirmada",date:a})}}catch(t){console.error("Error procesando fecha '".concat(a,"' para cita ").concat(i,":"),t)}})}),N(n)}catch(t){console.error("Error cargando citas:",t)}};(0,g.useEffect)(()=>{C(u,m)},[u,m]);let S=w[a]||[],M=t=>{l(e=>"prev"===t?0===e?(b(t=>t-1),11):e-1:11===e?(b(t=>t+1),0):e+1)},O=(()=>{let t=new Date(m,u,1),e=new Date(m,u+1,0),s=(t.getDay()+6)%7,r=e.getDate(),i=[],n=0===u?11:u-1,a=new Date(0===u?m-1:m,n+1,0).getDate();for(let t=s-1;t>=0;t--)i.push({day:a-t,isCurrentMonth:!1,isToday:!1,hasAppointments:!1});let o=new Date;for(let t=1;t<=r;t++){let e=o.getDate()===t&&o.getMonth()===u&&o.getFullYear()===m;i.push({day:t,isCurrentMonth:!0,isToday:e,hasAppointments:!!w[t]})}let c=(7-i.length%7)%7;for(let t=1;t<=c;t++)i.push({day:t,isCurrentMonth:!1,isToday:!1,hasAppointments:!1});if(i.length<35){let t=35-i.length;for(let e=c+1;e<=c+t;e++)i.push({day:e,isCurrentMonth:!1,isToday:!1,hasAppointments:!1})}return i.slice(0,35)})(),E=t=>{e.push("/patient-detailed-profile?id=".concat(t.patientUuid))},A=(t,s)=>{e.push("/session-workspace?patientId=".concat(s))};return(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)(d,{}),(0,r.jsxs)("main",{className:"container mx-auto px-6 py-8",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)("h1",{className:"font-serif text-3xl font-semibold text-primary mb-2",children:"Registro de Citas"})}),(0,r.jsxs)("div",{className:"grid grid-cols-5 gap-8",children:[(0,r.jsx)("div",{className:"col-span-3 space-y-8",children:(0,r.jsxs)(h.Zb,{className:"border-0 shadow-lg",children:[(0,r.jsx)(h.Ol,{className:"pb-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-6",children:[(0,r.jsx)(c.z,{variant:"outline",size:"icon",className:"h-9 w-9",onClick:()=>M("prev"),children:(0,r.jsx)(p,{className:"h-4 w-4"})}),(0,r.jsxs)("h2",{className:"font-serif text-xl font-medium",children:[null!==(t=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][u])&&void 0!==t?t:""," ",m]}),(0,r.jsx)(c.z,{variant:"outline",size:"icon",className:"h-9 w-9",onClick:()=>M("next"),children:(0,r.jsx)(f.Z,{className:"h-4 w-4"})})]})}),(0,r.jsx)(h.aY,{className:"pb-6",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-7 gap-2 text-center text-sm font-medium text-muted-foreground",children:[(0,r.jsx)("div",{children:"Lun"}),(0,r.jsx)("div",{children:"Mar"}),(0,r.jsx)("div",{children:"Mi\xe9"}),(0,r.jsx)("div",{children:"Jue"}),(0,r.jsx)("div",{children:"Vie"}),(0,r.jsx)("div",{children:"S\xe1b"}),(0,r.jsx)("div",{children:"Dom"})]}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-2 mt-4",children:O.map((t,e)=>{let s=a===t.day&&t.isCurrentMonth;return(0,r.jsx)("button",{onClick:()=>t.isCurrentMonth&&o(t.day),className:"\n                            aspect-square flex items-center justify-center text-sm rounded-lg transition-all\n                            ".concat(t.isCurrentMonth?"hover:bg-muted cursor-pointer":"text-muted-foreground/50 cursor-default"," \n                            ").concat(t.isToday?"bg-primary text-primary-foreground font-semibold":"","\n                            ").concat(s&&!t.isToday?"bg-muted border-2 border-primary":"","\n                            ").concat(t.hasAppointments&&t.isCurrentMonth?"bg-[#800020] text-white font-medium":""," \n                          "),disabled:!t.isCurrentMonth,children:t.day},e)})})]})})]})}),(0,r.jsxs)("div",{className:"col-span-2 space-y-8",children:[(0,r.jsxs)(h.Zb,{className:"border-0 shadow-lg",children:[(0,r.jsx)(h.Ol,{className:"pb-4",children:(0,r.jsxs)(h.ll,{className:"font-serif text-xl flex items-center",children:[(0,r.jsx)(y.Z,{className:"mr-2 h-5 w-5"})," Citas del D\xeda ",a]})}),(0,r.jsx)(h.aY,{className:"pb-6",children:i?(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Cargando pacientes..."})}):S.length>0?(0,r.jsx)("div",{className:"space-y-4",children:S.map((t,e)=>(0,r.jsx)("div",{className:"border rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(x,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsx)("span",{className:"font-medium",children:t.time})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{onClick:()=>E(t),className:"font-medium text-foreground hover:text-primary underline-offset-4 hover:underline text-left",children:t.patient}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:t.type})]})]}),(0,r.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>A(t.patient,t.patientUuid),children:"Iniciar Sesi\xf3n"})]})},e))}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(y.Z,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),(0,r.jsx)("h3",{className:"font-medium text-foreground mb-2",children:"No hay citas para este d\xeda"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:0===j.length?"Primero necesitas crear pacientes":"Selecciona otra fecha en el calendario"}),0===j.length&&(0,r.jsx)(c.z,{variant:"outline",onClick:()=>e.push("/patient-list"),children:"Ir a Pacientes"})]})})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(c.z,{className:"mt-2",onClick:()=>e.push("/new-patient"),children:"Nueva Cita"})})]})]})]})]})}},2869:function(t,e,s){"use strict";s.d(e,{d:function(){return c},z:function(){return u}});var r=s(7437),i=s(2265),n=s(7053),a=s(535),o=s(4508);let c=(0,a.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 font-sans font-medium transition-colors",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border-2 border-primary bg-transparent text-primary hover:bg-primary hover:text-primary-foreground font-sans font-medium transition-colors",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 font-sans font-medium",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",inforia:"bg-primary text-primary-foreground hover:bg-primary/90 font-sans font-medium transition-colors",burgundy:"bg-burgundy text-burgundy-foreground hover:bg-burgundy/90 font-sans font-medium transition-colors",gold:"bg-gold text-gold-foreground hover:bg-gold/90 font-sans font-medium transition-colors"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=i.forwardRef((t,e)=>{let{className:s,variant:i,size:a,asChild:u=!1,...l}=t,d=u?n.g7:"button";return(0,r.jsx)(d,{className:(0,o.cn)(c({variant:i,size:a,className:s})),ref:e,...l})});u.displayName="Button"},6070:function(t,e,s){"use strict";s.d(e,{Ol:function(){return o},SZ:function(){return u},Zb:function(){return a},aY:function(){return l},ll:function(){return c}});var r=s(7437),i=s(2265),n=s(4508);let a=i.forwardRef((t,e)=>{let{className:s,...i}=t;return(0,r.jsx)("div",{ref:e,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...i})});a.displayName="Card";let o=i.forwardRef((t,e)=>{let{className:s,...i}=t;return(0,r.jsx)("div",{ref:e,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...i})});o.displayName="CardHeader";let c=i.forwardRef((t,e)=>{let{className:s,...i}=t;return(0,r.jsx)("h3",{ref:e,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...i})});c.displayName="CardTitle";let u=i.forwardRef((t,e)=>{let{className:s,...i}=t;return(0,r.jsx)("p",{ref:e,className:(0,n.cn)("text-sm text-muted-foreground",s),...i})});u.displayName="CardDescription";let l=i.forwardRef((t,e)=>{let{className:s,...i}=t;return(0,r.jsx)("div",{ref:e,className:(0,n.cn)("p-6 pt-0",s),...i})});l.displayName="CardContent",i.forwardRef((t,e)=>{let{className:s,...i}=t;return(0,r.jsx)("div",{ref:e,className:(0,n.cn)("flex items-center p-6 pt-0",s),...i})}).displayName="CardFooter"},6281:function(t,e,s){"use strict";s.d(e,{AuthProvider:function(){return o},a:function(){return c}});var r=s(7437),i=s(2265),n=s(5452);let a=(0,i.createContext)({user:null,profile:null,loading:!0,updateProfile:async()=>{},signOut:async()=>{}}),o=t=>{let{children:e}=t,s=(0,n.createClientComponentClient)(),[o,c]=(0,i.useState)(null),[u,l]=(0,i.useState)(null),[d,h]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{var t;let{data:{session:e}}=await s.auth.getSession();if(c(null!==(t=null==e?void 0:e.user)&&void 0!==t?t:null),null==e?void 0:e.user){let{data:t}=await s.from("profiles").select("*").eq("id",e.user.id).single();l(t)}h(!1)})();let{data:t}=s.auth.onAuthStateChange((t,e)=>{var r;c(null!==(r=null==e?void 0:e.user)&&void 0!==r?r:null),(null==e?void 0:e.user)?(async()=>{let{data:t}=await s.from("profiles").select("*").eq("id",e.user.id).single();l(t)})():l(null)});return()=>{t.subscription.unsubscribe()}},[s]);let m=async t=>{if(!o)return;let{error:e}=await s.from("profiles").update(t).eq("id",o.id);if(e)throw e;let{data:r}=await s.from("profiles").select("*").eq("id",o.id).single();l(r)},p=async()=>{await s.auth.signOut()};return(0,r.jsx)(a.Provider,{value:{user:o,profile:u,loading:d,updateProfile:m,signOut:p},children:e})},c=()=>{let t=(0,i.useContext)(a);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}},212:function(t,e,s){"use strict";s.d(e,{pm:function(){return h}});var r=s(2265);let i=0,n=new Map,a=t=>{if(n.has(t))return;let e=setTimeout(()=>{n.delete(t),l({type:"REMOVE_TOAST",toastId:t})},1e6);n.set(t,e)},o=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,1)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{let{toastId:s}=e;return s?a(s):t.toasts.forEach(t=>{a(t.id)}),{...t,toasts:t.toasts.map(t=>t.id===s||void 0===s?{...t,open:!1}:t)}}case"REMOVE_TOAST":if(void 0===e.toastId)return{...t,toasts:[]};return{...t,toasts:t.toasts.filter(t=>t.id!==e.toastId)}}},c=[],u={toasts:[]};function l(t){u=o(u,t),c.forEach(t=>{t(u)})}function d(t){let{...e}=t,s=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>l({type:"DISMISS_TOAST",toastId:s});return l({type:"ADD_TOAST",toast:{...e,id:s,open:!0,onOpenChange:t=>{t||r()}}}),{id:s,dismiss:r,update:t=>l({type:"UPDATE_TOAST",toast:{...t,id:s}})}}function h(){let[t,e]=r.useState(u);return r.useEffect(()=>(c.push(e),()=>{let t=c.indexOf(e);t>-1&&c.splice(t,1)}),[t]),{...t,toast:d,dismiss:t=>l({type:"DISMISS_TOAST",toastId:t})}}},3049:function(t,e,s){"use strict";s.d(e,{Sl:function(){return d},aq:function(){return l},lm:function(){return u},w5:function(){return c}});var r=s(1713),i=s(9827),n=s(1770),a=s(6467),o=s(212);let c=()=>(0,r.a)({queryKey:["patients"],queryFn:a.Wd.getAll}),u=t=>(0,r.a)({queryKey:["patient",t],queryFn:()=>a.Wd.getById(t),enabled:!!t}),l=()=>{let t=(0,i.NL)(),{toast:e}=(0,o.pm)();return(0,n.D)({mutationFn:t=>{let{id:e,updates:s}=t;return a.Wd.update(e,s)},onSuccess:()=>{t.invalidateQueries({queryKey:["patients"]}),e({title:"Paciente actualizado",description:"Los datos del paciente se han actualizado correctamente"})},onError:t=>{console.error("Error updating patient:",t),e({title:"Error",description:"Error al actualizar el paciente",variant:"destructive"})}})},d=()=>{let t=(0,i.NL)(),{toast:e}=(0,o.pm)();return(0,n.D)({mutationFn:t=>a.Wd.delete(t),onSuccess:()=>{t.invalidateQueries({queryKey:["patients"]}),e({title:"Paciente eliminado",description:"El paciente se ha eliminado correctamente"})},onError:t=>{console.error("Error deleting patient:",t),e({title:"Error",description:"Error al eliminar el paciente",variant:"destructive"})}})}},6467:function(t,e,s){"use strict";s.d(e,{Wd:function(){return i},qi:function(){return n}});let r=(0,s(970).e)(),i={async getAll(){let{data:t,error:e}=await r.from("patients").select("*").order("created_at",{ascending:!1});if(e)throw e;return t||[]},async getById(t){let{data:e,error:s}=await r.from("patients").select("*").eq("id",t).maybeSingle();if(s)throw s;return e},async create(t){let{data:e,error:s}=await r.from("patients").insert(t).select().single();if(s)throw s;return e},async update(t,e){let{data:s,error:i}=await r.from("patients").update(e).eq("id",t).select().single();if(i)throw i;return s},async delete(t){let{error:e}=await r.from("patients").delete().eq("id",t);if(e)throw e},async search(t){let{data:e,error:s}=await r.from("patients").select("*").or("name.ilike.%".concat(t,"%,email.ilike.%").concat(t,"%")).order("created_at",{ascending:!1});if(s)throw s;return e||[]}},n={async getAll(){let{data:t,error:e}=await r.from("reports").select("\n        *,\n        patient:patients(\n          id,\n          name,\n          email\n        )\n      ").order("created_at",{ascending:!1});if(e)throw e;return t||[]},async getByPatient(t){let{data:e,error:s}=await r.from("reports").select("*").eq("patient_id",t).order("created_at",{ascending:!1});if(s)throw s;return e||[]},async create(t){let{data:e,error:s}=await r.from("reports").insert(t).select().single();if(s)throw s;return e},async update(t,e){let{data:s,error:i}=await r.from("reports").update(e).eq("id",t).select().single();if(i)throw i;return s},async delete(t){let{error:e}=await r.from("reports").delete().eq("id",t);if(e)throw e}}},970:function(t,e,s){"use strict";s.d(e,{e:function(){return i}});var r=s(2990);function i(){return(0,r.createBrowserClient)("https://sxtpbcboesvwcohtobfl.supabase.co","e8619976445af22a809621564f04544f2fac23d015cec4efc6b70")}},4508:function(t,e,s){"use strict";s.d(e,{cn:function(){return n}});var r=s(1994),i=s(3335);function n(){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];return(0,i.m6)((0,r.W)(e))}},2369:function(t,e,s){"use strict";s.d(e,{Z:function(){return r}});let r=(0,s(9205).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2894:function(t,e,s){"use strict";s.d(e,{R:function(){return o},m:function(){return a}});var r=s(8238),i=s(7989),n=s(1255),a=class extends i.F{#t;#e;#s;#r;constructor(t){super(),this.#t=t.client,this.mutationId=t.mutationId,this.#s=t.mutationCache,this.#e=[],this.state=t.state||o(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||("pending"===this.state.status?this.scheduleGc():this.#s.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){let e=()=>{this.#i({type:"continue"})},s={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=(0,n.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(Error("No mutationFn found")),onFail:(t,e)=>{this.#i({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#i({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});let r="pending"===this.state.status,i=!this.#r.canStart();try{if(r)e();else{this.#i({type:"pending",variables:t,isPaused:i}),await this.#s.config.onMutate?.(t,this,s);let e=await this.options.onMutate?.(t,s);e!==this.state.context&&this.#i({type:"pending",context:e,variables:t,isPaused:i})}let n=await this.#r.start();return await this.#s.config.onSuccess?.(n,t,this.state.context,this,s),await this.options.onSuccess?.(n,t,this.state.context,s),await this.#s.config.onSettled?.(n,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(n,null,t,this.state.context,s),this.#i({type:"success",data:n}),n}catch(e){try{throw await this.#s.config.onError?.(e,t,this.state.context,this,s),await this.options.onError?.(e,t,this.state.context,s),await this.#s.config.onSettled?.(void 0,e,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(void 0,e,t,this.state.context,s),e}finally{this.#i({type:"error",error:e})}}finally{this.#s.runNext(this)}}#i(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}})(this.state),r.Vr.batch(()=>{this.#e.forEach(e=>{e.onMutationUpdate(t)}),this.#s.notify({mutation:this,type:"updated",action:t})})}};function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},1770:function(t,e,s){"use strict";s.d(e,{D:function(){return l}});var r=s(2265),i=s(2894),n=s(8238),a=s(4112),o=s(8536),c=class extends a.l{#t;#n=void 0;#a;#o;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#c()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,o.VS)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#a,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(e.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#a?.state.status==="pending"&&this.#a.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#a?.removeObserver(this)}onMutationUpdate(t){this.#c(),this.#u(t)}getCurrentResult(){return this.#n}reset(){this.#a?.removeObserver(this),this.#a=void 0,this.#c(),this.#u()}mutate(t,e){return this.#o=e,this.#a?.removeObserver(this),this.#a=this.#t.getMutationCache().build(this.#t,this.options),this.#a.addObserver(this),this.#a.execute(t)}#c(){let t=this.#a?.state??(0,i.R)();this.#n={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#u(t){n.Vr.batch(()=>{if(this.#o&&this.hasListeners()){let e=this.#n.variables,s=this.#n.context,r={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#o.onSuccess?.(t.data,e,s,r),this.#o.onSettled?.(t.data,null,e,s,r)):t?.type==="error"&&(this.#o.onError?.(t.error,e,s,r),this.#o.onSettled?.(void 0,t.error,e,s,r))}this.listeners.forEach(t=>{t(this.#n)})})}},u=s(9827);function l(t,e){let s=(0,u.NL)(e),[i]=r.useState(()=>new c(s,t));r.useEffect(()=>{i.setOptions(t)},[i,t]);let a=r.useSyncExternalStore(r.useCallback(t=>i.subscribe(n.Vr.batchCalls(t)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),l=r.useCallback((t,e)=>{i.mutate(t,e).catch(o.ZT)},[i]);if(a.error&&(0,o.L3)(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:l,mutateAsync:a.mutate}}}},function(t){t.O(0,[545,582,990,452,630,763,438,713,971,117,744],function(){return t(t.s=4675)}),_N_E=t.O()}]);