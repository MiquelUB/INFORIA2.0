(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{5962:function(e,r,t){Promise.resolve().then(t.bind(t,8902))},8902:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return N}});var n=t(7437),a=t(2265),i=t(6281),s=t(9376),o=t(2869),l=t(5186),d=t(6815),c=t(6070),u=t(2759);let f=e=>{let{children:r,requireOnboarding:t=!0}=e,{user:o,profile:l,loading:d}=(0,i.a)(),c=(0,s.useRouter)();return((0,a.useEffect)(()=>{d||(o?!t||(null==l?void 0:l.onboarding_completed)||c.push("/onboarding"):c.push("/login"))},[o,l,d,t,c]),d)?(0,n.jsx)("div",{children:"Loading..."}):(0,n.jsx)(n.Fragment,{children:r})};var m=t(2369),p=t(9205);let x=(0,p.Z)("id-card",[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]]);var h=t(3041);let v=(0,p.Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var g=t(2660);let y=(0,p.Z)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var b=t(4438);let j=[{id:"basic",title:"Informaci\xf3n B\xe1sica",description:"Datos personales y profesionales",icon:m.Z},{id:"professional",title:"Datos Profesionales",description:"N\xfamero de colegiado y consulta",icon:x},{id:"contact",title:"Informaci\xf3n de Contacto",description:"Tel\xe9fono y detalles adicionales",icon:h.Z},{id:"complete",title:"Completado",description:"\xa1Todo listo para comenzar!",icon:v}];function N(){let{profile:e,updateProfile:r}=(0,i.a)(),t=(0,s.useRouter)(),[m,p]=(0,a.useState)(0),[x,h]=(0,a.useState)(!1),[N,w]=(0,a.useState)({full_name:(null==e?void 0:e.full_name)||"",professional_license:(null==e?void 0:e.professional_license)||"",clinic_name:(null==e?void 0:e.clinic_name)||"",phone:(null==e?void 0:e.phone)||""}),C=e=>r=>{w(t=>({...t,[e]:r.target.value}))},_=async()=>{if(!N.full_name.trim()||!N.professional_license.trim()){b.Am.error("Por favor completa los campos obligatorios");return}h(!0);try{await r({...N,onboarding_completed:!0}),p(j.length-1),setTimeout(()=>{t.replace("/dashboard")},2e3)}catch(e){console.error("Error completing onboarding:",e),b.Am.error("Error al completar la configuraci\xf3n")}finally{h(!1)}},k=(m+1)/j.length*100,P=j[m].icon;return(0,n.jsx)(f,{requireOnboarding:!1,children:(0,n.jsx)("div",{className:"min-h-screen bg-inforia-cream flex items-center justify-center p-4",children:(0,n.jsxs)(c.Zb,{className:"w-full max-w-2xl",children:[(0,n.jsxs)(c.Ol,{className:"text-center space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[(0,n.jsx)("div",{className:"h-10 w-10 bg-gold rounded-full flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-primary font-bold text-lg font-serif",children:"i"})}),(0,n.jsx)("span",{className:"text-2xl font-serif font-semibold text-primary",children:"iNFORiA"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(c.ll,{className:"text-2xl font-serif text-primary mb-2",children:"\xa1Bienvenido a INFORIA!"}),(0,n.jsx)(c.SZ,{children:"Completa tu perfil profesional para comenzar"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(u.E,{value:k,className:"w-full"}),(0,n.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Paso ",m+1," de ",j.length]})]})]}),(0,n.jsx)(c.aY,{className:"space-y-6",children:m<j.length-1?(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-inforia-cream rounded-lg",children:[(0,n.jsx)("div",{className:"h-10 w-10 bg-primary rounded-full flex items-center justify-center",children:(0,n.jsx)(P,{className:"h-5 w-5 text-primary-foreground"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold text-primary",children:j[m].title}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:j[m].description})]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[0===m&&(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)(d._,{htmlFor:"full_name",children:["Nombre Completo *",(0,n.jsx)("span",{className:"text-xs text-muted-foreground ml-2",children:"(Como aparece en tu t\xedtulo profesional)"})]}),(0,n.jsx)(l.I,{id:"full_name",type:"text",placeholder:"Dr. Mar\xeda Garc\xeda L\xf3pez",value:N.full_name,onChange:C("full_name"),className:"mt-1",required:!0})]})}),1===m&&(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(d._,{htmlFor:"professional_license",children:["N\xfamero de Colegiado *",(0,n.jsx)("span",{className:"text-xs text-muted-foreground ml-2",children:"(Colegio Oficial de Psic\xf3logos)"})]}),(0,n.jsx)(l.I,{id:"professional_license",type:"text",placeholder:"M-12345, AN-67890, etc.",value:N.professional_license,onChange:C("professional_license"),className:"mt-1",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(d._,{htmlFor:"clinic_name",children:["Nombre de la Consulta",(0,n.jsx)("span",{className:"text-xs text-muted-foreground ml-2",children:"(Opcional)"})]}),(0,n.jsx)(l.I,{id:"clinic_name",type:"text",placeholder:"Centro de Psicolog\xeda Garc\xeda",value:N.clinic_name,onChange:C("clinic_name"),className:"mt-1"})]})]}),2===m&&(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(d._,{htmlFor:"phone",children:["Tel\xe9fono",(0,n.jsx)("span",{className:"text-xs text-muted-foreground ml-2",children:"(Opcional)"})]}),(0,n.jsx)(l.I,{id:"phone",type:"tel",placeholder:"+34 600 000 000",value:N.phone,onChange:C("phone"),className:"mt-1"})]}),(0,n.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,n.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"\uD83D\uDD12 Privacidad y Seguridad"}),(0,n.jsx)("p",{className:"text-sm text-blue-800",children:'INFORIA utiliza un modelo de "conocimiento cero". Los informes de tus pacientes se guardan directamente en tu Google Drive personal, nunca en nuestros servidores.'})]})]})]}),(0,n.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,n.jsxs)(o.z,{type:"button",variant:"outline",onClick:()=>{m>0&&p(e=>e-1)},disabled:0===m||x,children:[(0,n.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Anterior"]}),(0,n.jsx)(o.z,{type:"button",onClick:()=>{if(0===m&&!N.full_name.trim()){b.Am.error("Por favor ingresa tu nombre completo");return}if(1===m&&!N.professional_license.trim()){b.Am.error("Por favor ingresa tu n\xfamero de colegiado");return}m<j.length-2?p(e=>e+1):_()},disabled:x,variant:"inforia",children:m===j.length-2?x?"Completando...":"Completar Configuraci\xf3n":(0,n.jsxs)(n.Fragment,{children:["Siguiente",(0,n.jsx)(y,{className:"ml-2 h-4 w-4"})]})})]})]}):(0,n.jsxs)("div",{className:"text-center space-y-6 py-8",children:[(0,n.jsx)("div",{className:"h-20 w-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:(0,n.jsx)(v,{className:"h-10 w-10 text-green-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-2xl font-bold text-primary mb-2",children:"\xa1Configuraci\xf3n Completada!"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Tu perfil ha sido configurado exitosamente. Ser\xe1s redirigido al dashboard en breve."})]}),(0,n.jsx)("div",{className:"animate-pulse",children:(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Redirigiendo a tu Puesto de Mando Cl\xednico..."})})]})})]})})})}},2869:function(e,r,t){"use strict";t.d(r,{d:function(){return l},z:function(){return d}});var n=t(7437),a=t(2265),i=t(7053),s=t(535),o=t(4508);let l=(0,s.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 font-sans font-medium transition-colors",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border-2 border-primary bg-transparent text-primary hover:bg-primary hover:text-primary-foreground font-sans font-medium transition-colors",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 font-sans font-medium",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",inforia:"bg-primary text-primary-foreground hover:bg-primary/90 font-sans font-medium transition-colors",burgundy:"bg-burgundy text-burgundy-foreground hover:bg-burgundy/90 font-sans font-medium transition-colors",gold:"bg-gold text-gold-foreground hover:bg-gold/90 font-sans font-medium transition-colors"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,r)=>{let{className:t,variant:a,size:s,asChild:d=!1,...c}=e,u=d?i.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(l({variant:a,size:s,className:t})),ref:r,...c})});d.displayName="Button"},6070:function(e,r,t){"use strict";t.d(r,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return s},aY:function(){return c},ll:function(){return l}});var n=t(7437),a=t(2265),i=t(4508);let s=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});s.displayName="Card";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...a})});o.displayName="CardHeader";let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});l.displayName="CardTitle";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("p",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",t),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",t),...a})});c.displayName="CardContent",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},5186:function(e,r,t){"use strict";t.d(r,{I:function(){return s}});var n=t(7437),a=t(2265),i=t(4508);let s=a.forwardRef((e,r)=>{let{className:t,type:a,...s}=e;return(0,n.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});s.displayName="Input"},6815:function(e,r,t){"use strict";t.d(r,{_:function(){return d}});var n=t(7437),a=t(2265),i=t(6394),s=t(535),o=t(4508);let l=(0,s.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)(i.f,{ref:r,className:(0,o.cn)(l(),t),...a})});d.displayName=i.f.displayName},2759:function(e,r,t){"use strict";t.d(r,{E:function(){return o}});var n=t(7437),a=t(2265),i=t(610),s=t(4508);let o=a.forwardRef((e,r)=>{let{className:t,value:a,...o}=e;return(0,n.jsx)(i.fC,{ref:r,className:(0,s.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...o,children:(0,n.jsx)(i.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});o.displayName=i.fC.displayName},6281:function(e,r,t){"use strict";t.d(r,{AuthProvider:function(){return o},a:function(){return l}});var n=t(7437),a=t(2265),i=t(5452);let s=(0,a.createContext)({user:null,profile:null,loading:!0,updateProfile:async()=>{},signOut:async()=>{}}),o=e=>{let{children:r}=e,t=(0,i.createClientComponentClient)(),[o,l]=(0,a.useState)(null),[d,c]=(0,a.useState)(null),[u,f]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{var e;let{data:{session:r}}=await t.auth.getSession();if(l(null!==(e=null==r?void 0:r.user)&&void 0!==e?e:null),null==r?void 0:r.user){let{data:e}=await t.from("profiles").select("*").eq("id",r.user.id).single();c(e)}f(!1)})();let{data:e}=t.auth.onAuthStateChange((e,r)=>{var n;l(null!==(n=null==r?void 0:r.user)&&void 0!==n?n:null),(null==r?void 0:r.user)?(async()=>{let{data:e}=await t.from("profiles").select("*").eq("id",r.user.id).single();c(e)})():c(null)});return()=>{e.subscription.unsubscribe()}},[t]);let m=async e=>{if(!o)return;let{error:r}=await t.from("profiles").update(e).eq("id",o.id);if(r)throw r;let{data:n}=await t.from("profiles").select("*").eq("id",o.id).single();c(n)},p=async()=>{await t.auth.signOut()};return(0,n.jsx)(s.Provider,{value:{user:o,profile:d,loading:u,updateProfile:m,signOut:p},children:r})},l=()=>{let e=(0,a.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4508:function(e,r,t){"use strict";t.d(r,{cn:function(){return i}});var n=t(1994),a=t(3335);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.m6)((0,n.W)(r))}},2660:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(9205).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3041:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(9205).Z)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},2369:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(9205).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},3966:function(e,r,t){"use strict";t.d(r,{b:function(){return s},k:function(){return i}});var n=t(2265),a=t(7437);function i(e,r){let t=n.createContext(r),i=e=>{let{children:r,...i}=e,s=n.useMemo(()=>i,Object.values(i));return(0,a.jsx)(t.Provider,{value:s,children:r})};return i.displayName=e+"Provider",[i,function(a){let i=n.useContext(t);if(i)return i;if(void 0!==r)return r;throw Error(`\`${a}\` must be used within \`${e}\``)}]}function s(e,r=[]){let t=[],i=()=>{let r=t.map(e=>n.createContext(e));return function(t){let a=t?.[e]||r;return n.useMemo(()=>({[`__scope${e}`]:{...t,[e]:a}}),[t,a])}};return i.scopeName=e,[function(r,i){let s=n.createContext(i),o=t.length;t=[...t,i];let l=r=>{let{scope:t,children:i,...l}=r,d=t?.[e]?.[o]||s,c=n.useMemo(()=>l,Object.values(l));return(0,a.jsx)(d.Provider,{value:c,children:i})};return l.displayName=r+"Provider",[l,function(t,a){let l=a?.[e]?.[o]||s,d=n.useContext(l);if(d)return d;if(void 0!==i)return i;throw Error(`\`${t}\` must be used within \`${r}\``)}]},function(...e){let r=e[0];if(1===e.length)return r;let t=()=>{let t=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=t.reduce((r,{useScope:t,scopeName:n})=>{let a=t(e)[`__scope${n}`];return{...r,...a}},{});return n.useMemo(()=>({[`__scope${r.scopeName}`]:a}),[a])}};return t.scopeName=r.scopeName,t}(i,...r)]}},6394:function(e,r,t){"use strict";t.d(r,{f:function(){return o}});var n=t(2265),a=t(6840),i=t(7437),s=n.forwardRef((e,r)=>(0,i.jsx)(a.WV.label,{...e,ref:r,onMouseDown:r=>{var t;r.target.closest("button, input, select, textarea")||(null===(t=e.onMouseDown)||void 0===t||t.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));s.displayName="Label";var o=s},6840:function(e,r,t){"use strict";t.d(r,{WV:function(){return o},jH:function(){return l}});var n=t(2265),a=t(4887),i=t(7053),s=t(7437),o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let t=(0,i.Z8)(`Primitive.${r}`),a=n.forwardRef((e,n)=>{let{asChild:a,...i}=e,o=a?t:r;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(o,{...i,ref:n})});return a.displayName=`Primitive.${r}`,{...e,[r]:a}},{});function l(e,r){e&&a.flushSync(()=>e.dispatchEvent(r))}},610:function(e,r,t){"use strict";t.d(r,{fC:function(){return b},z$:function(){return j}});var n=t(2265),a=t(3966),i=t(6840),s=t(7437),o="Progress",[l,d]=(0,a.b)(o),[c,u]=l(o),f=n.forwardRef((e,r)=>{var t,n,a,o;let{__scopeProgress:l,value:d=null,max:u,getValueLabel:f=x,...m}=e;(u||0===u)&&!g(u)&&console.error((t="".concat(u),n="Progress","Invalid prop `max` of value `".concat(t,"` supplied to `").concat(n,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let p=g(u)?u:100;null===d||y(d,p)||console.error((a="".concat(d),o="Progress","Invalid prop `value` of value `".concat(a,"` supplied to `").concat(o,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let b=y(d,p)?d:null,j=v(b)?f(b,p):void 0;return(0,s.jsx)(c,{scope:l,value:b,max:p,children:(0,s.jsx)(i.WV.div,{"aria-valuemax":p,"aria-valuemin":0,"aria-valuenow":v(b)?b:void 0,"aria-valuetext":j,role:"progressbar","data-state":h(b,p),"data-value":null!=b?b:void 0,"data-max":p,...m,ref:r})})});f.displayName=o;var m="ProgressIndicator",p=n.forwardRef((e,r)=>{var t;let{__scopeProgress:n,...a}=e,o=u(m,n);return(0,s.jsx)(i.WV.div,{"data-state":h(o.value,o.max),"data-value":null!==(t=o.value)&&void 0!==t?t:void 0,"data-max":o.max,...a,ref:r})});function x(e,r){return"".concat(Math.round(e/r*100),"%")}function h(e,r){return null==e?"indeterminate":e===r?"complete":"loading"}function v(e){return"number"==typeof e}function g(e){return v(e)&&!isNaN(e)&&e>0}function y(e,r){return v(e)&&!isNaN(e)&&e<=r&&e>=0}p.displayName=m;var b=f,j=p}},function(e){e.O(0,[545,582,452,438,971,117,744],function(){return e(e.s=5962)}),_N_E=e.O()}]);