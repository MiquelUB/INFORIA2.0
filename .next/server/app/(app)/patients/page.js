(()=>{var e={};e.id=331,e.ids=[331],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},9029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>o}),s(8782),s(6979),s(5866),s(7449);var r=s(3191),a=s(8716),i=s(7922),n=s.n(i),l=s(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let o=["",{children:["(app)",{children:["patients",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8782)),"D:\\iNFORiA\\SaaS\\INFORIA2.0\\app\\(app)\\patients\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,6979)),"D:\\iNFORiA\\SaaS\\INFORIA2.0\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,7449)),"D:\\iNFORiA\\SaaS\\INFORIA2.0\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\iNFORiA\\SaaS\\INFORIA2.0\\app\\(app)\\patients\\page.tsx"],u="/(app)/patients/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(app)/patients/page",pathname:"/patients",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},1330:(e,t,s)=>{Promise.resolve().then(s.bind(s,9242))},9242:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(326),a=s(7462),i=s(772),n=s(3071),l=s(4432),c=s(567),o=s(8758),d=s(7506),u=s(3855),m=s(8307),h=s(2881);let x=(0,h.Z)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),p=(0,h.Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var f=s(9508),j=s(434),N=s(97),g=s(9940),v=s(7577);let y=()=>{let{data:e,isLoading:t,error:s}=(0,g.w5)(),[h,y]=(0,v.useState)(""),b=e?.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())||e.email?.toLowerCase().includes(h.toLowerCase())||e.phone?.toLowerCase().includes(h.toLowerCase()))||[],w=e=>e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),_=e=>new Date(e).toLocaleDateString("es-ES");return t?(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[r.jsx(a.B,{}),r.jsx("main",{className:"container mx-auto px-6 py-8 max-w-7xl",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(d.Z,{className:"h-8 w-8 animate-spin text-primary"})})})]}):s?(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[r.jsx(a.B,{}),r.jsx("main",{className:"container mx-auto px-6 py-8 max-w-7xl",children:r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-destructive",children:"Error al cargar los pacientes"})})})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[r.jsx(a.B,{}),(0,r.jsxs)("main",{className:"container mx-auto px-6 py-8 max-w-7xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-serif font-semibold text-foreground mb-2",children:"Gesti\xf3n de Pacientes"}),r.jsx("p",{className:"text-muted-foreground font-sans",children:"Administra y supervisa todos tus pacientes desde un solo lugar"})]}),r.jsx(j.default,{href:"/new-patient",children:(0,r.jsxs)(i.z,{className:"bg-primary hover:bg-primary/90 text-primary-foreground font-sans",children:[r.jsx(u.Z,{className:"mr-2 h-4 w-4"}),"Nuevo Paciente"]})})]}),r.jsx(n.Zb,{className:"mb-6",children:r.jsx(n.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[r.jsx(m.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(l.I,{placeholder:"Buscar por nombre, email o tel\xe9fono...",className:"pl-10",value:h,onChange:e=>y(e.target.value)})]}),r.jsx(i.z,{variant:"outline",className:"font-sans",children:"Filtros"})]})})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[r.jsx(n.Zb,{children:r.jsx(n.aY,{className:"p-6",children:r.jsx("div",{className:"flex items-center",children:(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Pacientes"}),r.jsx("p",{className:"text-2xl font-bold text-foreground",children:e?.length||0})]})})})}),r.jsx(n.Zb,{children:r.jsx(n.aY,{className:"p-6",children:r.jsx("div",{className:"flex items-center",children:(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Activos"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:b.length})]})})})}),r.jsx(n.Zb,{children:r.jsx(n.aY,{className:"p-6",children:r.jsx("div",{className:"flex items-center",children:(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Nuevos este mes"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"0"})]})})})})]}),(0,r.jsxs)(n.Zb,{children:[r.jsx(n.Ol,{}),r.jsx(n.aY,{className:"p-0",children:0===b.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-muted-foreground",children:h?"No se encontraron pacientes con ese criterio":"No hay pacientes registrados"}),!h&&r.jsx(j.default,{href:"/new-patient",children:(0,r.jsxs)(i.z,{className:"mt-4 bg-primary hover:bg-primary/90",children:[r.jsx(u.Z,{className:"mr-2 h-4 w-4"}),"Crear primer paciente"]})})]}):r.jsx("div",{className:"divide-y divide-border",children:b.map(e=>r.jsx("div",{className:"p-6 hover:bg-secondary/50 transition-calm",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx(o.qE,{className:"h-12 w-12",children:r.jsx(o.Q5,{className:"bg-primary text-primary-foreground font-sans",children:w(e.name)})}),(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx(j.default,{href:`/patient-detailed-profile?id=${e.id}`,className:"font-serif text-lg font-medium text-foreground hover:text-primary transition-calm",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground font-sans",children:[e.email&&r.jsx("span",{children:e.email}),e.email&&e.phone&&r.jsx("span",{children:"â€¢"}),e.phone&&r.jsx("span",{children:e.phone})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(c.C,{variant:"outline",className:"bg-green-100 text-green-800 border-green-200",children:"Activo"}),e.notes&&r.jsx(c.C,{variant:"outline",className:"font-sans",children:"Con notas"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-sm text-muted-foreground font-sans",children:["Creado: ",_(e.created_at??"")]}),(0,r.jsxs)(N.h_,{children:[r.jsx(N.$F,{asChild:!0,children:r.jsx(i.z,{variant:"ghost",size:"sm",children:r.jsx(x,{className:"h-4 w-4"})})}),(0,r.jsxs)(N.AW,{align:"end",children:[r.jsx(N.Xi,{children:(0,r.jsxs)(j.default,{href:`/patient-detailed-profile?id=${e.id}`,className:"w-full flex items-center",children:[r.jsx(p,{className:"mr-2 h-4 w-4"}),"Ver Ficha"]})}),r.jsx(N.Xi,{children:(0,r.jsxs)(j.default,{href:`/session-workspace?patientId=${e.id}`,className:"w-full flex items-center",children:[r.jsx(f.Z,{className:"mr-2 h-4 w-4"}),"Nueva Sesi\xf3n"]})})]})]})]})]})},e.id))})})]})]})]})}},7462:(e,t,s)=>{"use strict";s.d(t,{B:()=>y});var r=s(326),a=s(8307),i=s(748),n=s(7358),l=s(4061),c=s(3855),o=s(6283),d=s(6728),u=s(5529),m=s(1810),h=s(772),x=s(4432),p=s(97),f=s(8758),j=s(434),N=s(5047),g=s(3136),v=s(7068);let y=()=>{let e=(0,N.useRouter)(),{user:t,signOut:s}=(0,g.a)(),{toast:y}=(0,v.pm)(),b=async()=>{try{await s(),y({title:"Sesi\xf3n cerrada",description:"Has cerrado sesi\xf3n correctamente"}),e.push("/auth")}catch(e){console.error("Error signing out:",e),y({title:"Error",description:"Error al cerrar sesi\xf3n",variant:"destructive"})}};return r.jsx("header",{className:"border-b border-module-border bg-background sticky top-0 z-50",children:r.jsx("div",{className:"container mx-auto px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center",children:r.jsx(j.default,{href:"/",className:"hover:opacity-80 transition-calm",children:r.jsx("h1",{className:"font-serif text-2xl font-medium text-primary",children:"iNFORiA"})})}),r.jsx("div",{className:"flex-1 max-w-md mx-8",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(a.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r.jsx(x.I,{placeholder:"Buscar paciente por nombre, etiqueta...",className:"pl-10 bg-background"})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(p.h_,{children:[r.jsx(p.$F,{asChild:!0,children:r.jsx(h.z,{variant:"ghost",size:"icon",className:"hover:bg-secondary",children:r.jsx(i.Z,{className:"h-5 w-5"})})}),(0,r.jsxs)(p.AW,{align:"end",className:"w-56",children:[r.jsx(p.Xi,{className:"cursor-pointer",children:(0,r.jsxs)(j.default,{href:"/",className:"w-full flex items-center",children:[r.jsx(n.Z,{className:"mr-2 h-4 w-4"}),"Dashboard"]})}),r.jsx(p.Xi,{className:"cursor-pointer",children:(0,r.jsxs)(j.default,{href:"/patient-list",className:"w-full flex items-center",children:[r.jsx(l.Z,{className:"mr-2 h-4 w-4"}),"Pacientes"]})}),r.jsx(p.Xi,{className:"cursor-pointer",children:(0,r.jsxs)(j.default,{href:"/new-patient",className:"w-full flex items-center",children:[r.jsx(c.Z,{className:"mr-2 h-4 w-4"}),"Crear Ficha de Paciente"]})}),r.jsx(p.Xi,{className:"cursor-pointer",children:(0,r.jsxs)(j.default,{href:"/session-workspace",className:"w-full flex items-center",children:[r.jsx(o.Z,{className:"mr-2 h-4 w-4"}),"Nueva Sesi\xf3n"]})}),r.jsx(p.VD,{}),r.jsx(p.Xi,{className:"cursor-pointer",children:(0,r.jsxs)(j.default,{href:"/faqs",className:"w-full flex items-center",children:[r.jsx(d.Z,{className:"mr-2 h-4 w-4"}),"FAQs"]})})]})]}),(0,r.jsxs)(p.h_,{children:[r.jsx(p.$F,{asChild:!0,children:r.jsx(h.z,{variant:"ghost",size:"icon",className:"rounded-full hover:bg-secondary",children:r.jsx(f.qE,{className:"h-8 w-8",children:t?.user_metadata?.avatar_url?r.jsx(f.F$,{src:t.user_metadata.avatar_url,alt:t?.user_metadata?.full_name||"Usuario"}):r.jsx(f.Q5,{className:"bg-primary/10 text-primary",children:t?.user_metadata?.full_name?t.user_metadata.full_name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):t?.email?.slice(0,2).toUpperCase()||"U"})})})}),(0,r.jsxs)(p.AW,{align:"end",className:"w-48",children:[(0,r.jsxs)("div",{className:"px-3 py-2",children:[r.jsx("p",{className:"text-sm font-medium text-foreground",children:t?.user_metadata?.full_name||"Usuario"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:t?.email})]}),r.jsx(p.VD,{}),r.jsx(p.Xi,{className:"cursor-pointer",children:(0,r.jsxs)(j.default,{href:"/my-account",className:"w-full flex items-center",children:[r.jsx(u.Z,{className:"mr-2 h-4 w-4"}),"Mi Cuenta"]})}),r.jsx(p.VD,{}),(0,r.jsxs)(p.Xi,{className:"cursor-pointer text-destructive focus:text-destructive",onClick:b,children:[r.jsx(m.Z,{className:"mr-2 h-4 w-4"}),"Cerrar Sesi\xf3n"]})]})]})]})]})})})}},9940:(e,t,s)=>{"use strict";s.d(t,{Sl:()=>j,lm:()=>p,w5:()=>x,aq:()=>f});var r=s(108),a=s(4976),i=s(7577),n=s(1180),l=s(2113),c=s(4351),o=s(3341),d=class extends c.l{#e;#t=void 0;#s;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,o.VS)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(t.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#a(),this.#i()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#a(){let e=this.#s?.state??(0,n.R)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){l.Vr.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context,r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#r.onSuccess?.(e.data,t,s,r),this.#r.onSettled?.(e.data,null,t,s,r)):e?.type==="error"&&(this.#r.onError?.(e.error,t,s,r),this.#r.onSettled?.(void 0,e.error,t,s,r))}this.listeners.forEach(e=>{e(this.#t)})})}};function u(e,t){let s=(0,a.NL)(t),[r]=i.useState(()=>new d(s,e));i.useEffect(()=>{r.setOptions(e)},[r,e]);let n=i.useSyncExternalStore(i.useCallback(e=>r.subscribe(l.Vr.batchCalls(e)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),c=i.useCallback((e,t)=>{r.mutate(e,t).catch(o.ZT)},[r]);if(n.error&&(0,o.L3)(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:c,mutateAsync:n.mutate}}var m=s(5379),h=s(7068);let x=()=>(0,r.a)({queryKey:["patients"],queryFn:m.Wd.getAll}),p=e=>(0,r.a)({queryKey:["patient",e],queryFn:()=>m.Wd.getById(e),enabled:!!e}),f=()=>{let e=(0,a.NL)(),{toast:t}=(0,h.pm)();return u({mutationFn:({id:e,updates:t})=>m.Wd.update(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:["patients"]}),t({title:"Paciente actualizado",description:"Los datos del paciente se han actualizado correctamente"})},onError:e=>{console.error("Error updating patient:",e),t({title:"Error",description:"Error al actualizar el paciente",variant:"destructive"})}})},j=()=>{let e=(0,a.NL)(),{toast:t}=(0,h.pm)();return u({mutationFn:e=>m.Wd.delete(e),onSuccess:()=>{e.invalidateQueries({queryKey:["patients"]}),t({title:"Paciente eliminado",description:"El paciente se ha eliminado correctamente"})},onError:e=>{console.error("Error deleting patient:",e),t({title:"Error",description:"Error al eliminar el paciente",variant:"destructive"})}})}},5379:(e,t,s)=>{"use strict";s.d(t,{Wd:()=>a,qi:()=>i});let r=(0,s(2945).e)(),a={async getAll(){let{data:e,error:t}=await r.from("patients").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},async getById(e){let{data:t,error:s}=await r.from("patients").select("*").eq("id",e).maybeSingle();if(s)throw s;return t},async create(e){let{data:t,error:s}=await r.from("patients").insert(e).select().single();if(s)throw s;return t},async update(e,t){let{data:s,error:a}=await r.from("patients").update(t).eq("id",e).select().single();if(a)throw a;return s},async delete(e){let{error:t}=await r.from("patients").delete().eq("id",e);if(t)throw t},async search(e){let{data:t,error:s}=await r.from("patients").select("*").or(`name.ilike.%${e}%,email.ilike.%${e}%`).order("created_at",{ascending:!1});if(s)throw s;return t||[]}},i={async getAll(){let{data:e,error:t}=await r.from("reports").select(`
        *,
        patient:patients(
          id,
          name,
          email
        )
      `).order("created_at",{ascending:!1});if(t)throw t;return e||[]},async getByPatient(e){let{data:t,error:s}=await r.from("reports").select("*").eq("patient_id",e).order("created_at",{ascending:!1});if(s)throw s;return t||[]},async create(e){let{data:t,error:s}=await r.from("reports").insert(e).select().single();if(s)throw s;return t},async update(e,t){let{data:s,error:a}=await r.from("reports").update(t).eq("id",e).select().single();if(a)throw a;return s},async delete(e){let{error:t}=await r.from("reports").delete().eq("id",e);if(t)throw t}}},7506:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(2881).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9508:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(2881).Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},8782:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`D:\iNFORiA\SaaS\INFORIA2.0\app\(app)\patients\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,832,857,270,817,914,528,108,975],()=>s(9029));module.exports=r})();